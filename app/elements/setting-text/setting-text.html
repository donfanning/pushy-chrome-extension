<!--
  ~ Copyright (c) 2016-2017, Michael A. Updike All rights reserved.
  ~ Licensed under Apache 2.0
  ~ https://opensource.org/licenses/Apache-2.0
  ~ https://goo.gl/wFvBM1
  -->
<link rel="import" href="../setting-base/setting-base.html">

<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-item/paper-item-body.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">

<dom-module id="setting-text">
	<style include="shared-styles"></style>
	<style include="iron-flex iron-flex-alignment"></style>
	<template>
		<style>

			:host {
				display: block;
				position: relative;
			}

			:host([disabled]) {
				pointer-events: none;
			}

			:host([indent]) paper-item {
				padding-left: 24px;
			}

			:host paper-input {
				width: 175px;

				--paper-input-container-input: {
					text-align: right;
				};
			}

		</style>

		<setting-base id="base"
		              name="[[name]]" value="{{value}}" default-value="false"
		              section-title="[[sectionTitle]]"
		              noseparator="[[noseparator]]" disabled="[[disabled]]">
			<paper-item class="center horizontal layout" tabindex="-1">
				<paper-item-body class="flex" two-line>
					<div class="setting-label" hidden$="[[!mainLabel]]">{{mainLabel}}</div>
					<div class="setting-label" secondary hidden$="[[!secondaryLabel]]">{{secondaryLabel}}</div>
				</paper-item-body>
				<paper-input id="text" value="{{value}}" minlength="1" maxlength="{{maxLength}}"
				             placeholder="{{placeholder}}" tabindex="0" disabled$="[[disabled]]"
							 on-blur="_onBlur" on-keyup="_onKeyUp"></paper-input>
			</paper-item>
		</setting-base>
	</template>
</dom-module>

<script>
'use strict';
Polymer({
	is: 'setting-text',

	properties: {
		placeholder: {
			type: String,
			value: 'e.g. Text',
			notify: true,
		},

		maxLength: {
			type: Number,
			value: '16',
			notify: true,
		},

		mainLabel: {
			type: String,
			value: '',
		},

		secondaryLabel: {
			type: String,
			value: '',
		},
	},

	// fire event when input loses focus
	_onBlur: function() {
		this.fire('setting-text-changed', {value: this.value});
	},

	// fire event when Enter is pressed in input
	_onKeyUp: function(event) {
		// check if 'enter' was pressed
		if (event.keyCode === 13) {
			this.fire('setting-text-changed', {value: this.value});
		}
	},
});
</script>
