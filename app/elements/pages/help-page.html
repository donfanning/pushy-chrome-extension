<!--
  ~ Copyright (c) 2016-2017, Michael A. Updike All rights reserved.
  ~ Licensed under Apache 2.0
  ~ https://opensource.org/licenses/Apache-2.0
  ~ https://goo.gl/wFvBM1
  -->
<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="../../bower_components/paper-styles/typography.html">
<link rel="import" href="../../bower_components/paper-styles/color.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">

<link rel="import" href="../setting-link/setting-link.html">

<script type="text/javascript" src="../../scripts/exception_handler.js"></script>

<dom-module id="help-page">
	<template>
		<style include="iron-flex iron-flex-alignment"></style>
		<style include="shared-styles"></style>
		<style>

		:host {
			display: block;
			position: relative;
		}

		hr {
			margin-left: 0;
			margin-right: 0;
		}

		.card-content {
			padding: 0;
			margin: 0;
		}

		</style>

		<paper-card class="page-content" heading="Help & feedback">
			<div class="card-content">
				<setting-link section-title="Feedback (English only, please)"
				              label="Question"
				              name="questionMail"
				              icon="myicons:mail"
				              url="mailto:pushyclipboard%40gmail.com?subject=Question&body=[[_computeEmailBody()]]"></setting-link>
				<setting-link label="Bug report"
				              name="bugMail"
				              icon="myicons:mail"
				              url="mailto:pushyclipboard%40gmail.com?subject=Bug%20report&body=[[_computeEmailBody()]]"></setting-link>
				<setting-link label="Feature request"
				              name="featureMail"
				              icon="myicons:mail"
				              url="mailto:pushyclipboard%40gmail.com?subject=Feature%20request&body=[[_computeEmailBody()]]"></setting-link>
				<setting-link label="General feedback"
				              name="feedbackMail"
				              icon="myicons:mail"
				              url="mailto:pushyclipboard%40gmail.com?subject=General%20feedback"></setting-link>
				<setting-link label="Submit Github issue (requires account)"
				              name="submitGitHubIssue"
				              noseparator
				              icon="myicons:github"
				              url="https://github.com/Pushy-Clipboard/pushy-chrome-extension/issues/new"></setting-link>

				<hr />

				<setting-link section-title="Help"
				              name="documentation"
				              label="User documentation"
				              icon="myicons:info"
				              url="https://pushy-clipboard.github.io/documentation.html"></setting-link>
				<setting-link label="Release notes"
				              name="releaseNotes"
				              icon="myicons:github"
				              url="https://github.com/Pushy-Clipboard/pushy-chrome-extension/releases/tag/v[[_computeVersion()]]"></setting-link>
				<setting-link label="Open source licenses"
				              name="licenses"
				              icon="myicons:github"
				              url="https://github.com/Pushy-Clipboard/pushy-chrome-extension/blob/master/LICENSES.md"></setting-link>
				<setting-link label="Source code"
				              name="sourceCode"
				              noseparator
				              icon="myicons:github"
				              url="https://github.com/Pushy-Clipboard/pushy-chrome-extension"></setting-link>
			</div>
		</paper-card>
	</template>
</dom-module>

<script>
(function(window) {
	'use strict';

	new ExceptionHandler();

	window.app = window.app || {};
	app.HelpPageFactory = Polymer({
		is: 'help-page',

       /**
        * computed binding: Get the body for support emails
        * @returns {string} email body
        * @private
        */
       _computeEmailBody: function() {
			const text =
				`Extension version: ${app.Utils.getVersion()}
				Chrome version: ${app.Utils.getFullChromeVersion()}
				OS: ${app.Storage.get('os')}\n\n\n`;
			return encodeURIComponent(text);
       },

       /**
        * computed binding: Get the extension version
        * @returns {string} version
        * @private
        */
       _computeVersion: function() {
			const text = app.Utils.getVersion();
			return encodeURIComponent(text);
       },

	});
})(window);
</script>
